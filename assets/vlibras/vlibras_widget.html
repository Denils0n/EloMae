<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VLibras</title>
  <!-- <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script> -->
</head>
<body>
  <div vw class="enabled">
    <div vw-access-button class="active"></div>
    <div vw-plugin-wrapper>
      <div class="vw-plugin-top-wrapper"></div>
    </div>
  </div>
  <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
  <script>
    new window.VLibras.Widget('https://vlibras.gov.br/app');

    document.addEventListener('DOMContentLoaded', function () {
      // Botão de expandir
      const btn = document.querySelector('[vw-access-button]');
      if (btn) {
        btn.addEventListener('click', function () {
          if (window.VLibrasChannel) {
            window.VLibrasChannel.postMessage('expand');
          }
        });
      }

      // Observa o DOM para adicionar o listener ao botão de fechar
      const closeBtnObserver = new MutationObserver(() => {
        const closeBtn = document.querySelector('.vpw-header-btn-close');
        if (closeBtn && !closeBtn._listenerAdded) {
          closeBtn.addEventListener('click', function () {
            if (window.VLibrasChannel) {
              window.VLibrasChannel.postMessage('collapse');
            }
          });
          closeBtn._listenerAdded = true; // Evita múltiplos listeners
        }
      });

      closeBtnObserver.observe(document.body, { childList: true, subtree: true });
    });
  </script>
</body>
</html>
